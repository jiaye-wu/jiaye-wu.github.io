<!DOCTYPE html> <html lang="zh-hk"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> [檔案] 在Android平板電腦上運行Linux桌面發行版 | Jiaye Wu </title> <meta name="author" content="Jiaye Wu"> <meta name="description" content="在Android上運行Linux桌面的個人筆記"> <meta name="keywords" content="personal website, academic-website, portfolio-website, lab-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?c967e6c640a70b33cce166957d0b3f6b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jiaye-wu.github.io/zh-hk/blog/2024/blog-Linux-on-Android/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <div class="banner-container"> <div class="banner"> <img src="/assets/img/banners/banner.png" alt="Banner Image"> </div> </div> <style>.banner-container{width:1280px;margin:0 auto;position:relative}.banner{width:100%;height:40px;display:flex;justify-content:flex-start;align-items:center;overflow:hidden;z-index:1050;position:fixed;top:0;background-color:var(--global-bg-color);opacity:.95;backdrop-filter:blur(100px);可选：模糊效果，增强视觉效果 */}.banner img{height:100%;width:auto}@media(max-width:768px){.banner img{width:100%;height:auto}}#navbar{z-index:1000;margin-top:40px}</style> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-md fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/zh-hk/"> <span class="font-weight-bold">Jiaye</span> Wu </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/zh-hk/">主頁 </a> </li> <li class="nav-item active"> <a class="nav-link" href="/zh-hk/blog/">博客文章 </a> </li> <li class="nav-item "> <a class="nav-link" href="/zh-hk/publications/">科研成果 </a> </li> <li class="nav-item "> <a class="nav-link" href="/zh-hk/projects/">課題項目 </a> </li> <li class="nav-item "> <a class="nav-link" href="/zh-hk/services/">教研服務 </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">更多 </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/zh-hk/news/">新聞列表</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/zh-hk/links/">相關鏈接</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/zh-hk/repositories/">代碼倉庫</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="fi fi-hk"></span> </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/blog/2024/blog-Linux-on-Android/"> <span class="fi fi-us"></span> </a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/zh-cn/blog/2024/blog-Linux-on-Android/"> <span class="fi fi-cn"></span> </a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">[檔案] 在Android平板電腦上運行Linux桌面發行版</h1> <p class="post-meta"> 創作於 29 09 2024 </p> <p class="post-tags"> <a href="/zh-hk/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/zh-hk/blog/tag/android"> <i class="fa-solid fa-hashtag fa-sm"></i> android</a>   <a href="/zh-hk/blog/tag/open-source"> <i class="fa-solid fa-hashtag fa-sm"></i> open source</a>   <a href="/zh-hk/blog/tag/software"> <i class="fa-solid fa-hashtag fa-sm"></i> software</a>   ·   <a href="/zh-hk/blog/category/development"> <i class="fa-solid fa-tag fa-sm"></i> development</a>   <a href="/zh-hk/blog/category/archive"> <i class="fa-solid fa-tag fa-sm"></i> archive</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>由於項目涉及大量計算機學科術語，礙於精力有限，本項目文檔僅提供英文原文。讀者可自行使用網頁翻譯工具。</p> <p>本項目的代碼倉庫位於<a href="https://github.com/TerenceWSK/Android-Termux-Subsystem-for-Linux/" rel="external nofollow noopener" target="_blank">https://github.com/TerenceWSK/Android-Termux-Subsystem-for-Linux/</a>。</p> <h1 id="android-termux-subsystem-for-linux">Android-Termux-Subsystem-for-Linux</h1> <p>This repository is the personal collection of configurations for running Linux on Android <strong>without root</strong>. Transform your Android tablet into a (more portable) ARM64 Linux laptop!</p> <p>This tutorial provides solutions for:</p> <ul> <li> <strong>Native</strong> Android-Termux-based Linux Desktop environment</li> <li>Termux-based <strong>PRoot</strong> Linux Distros (in this article, we select Ubuntu as an example)</li> </ul> <p>The <strong>native</strong> solution is faster but <strong>PRoot</strong> has much more Linux apps support.</p> <h2 id="references--credits">References &amp; Credits</h2> <p>Many tutorials exist on how to run Linux on Android. However, depending on the <strong>version of Android you are using</strong> and the <strong>version of Linux you installed</strong> (and also it depends on the <strong>time you decide to try</strong> – some services might have changed), <strong>your mileage may vary</strong>. I followed the listed tutorials and adapted them to my needs. I wrote this tutorial as my personal note &amp; script-bakcups as well as a reference for future readers.</p> <ul> <li> <a href="https://termux.dev/en/" rel="external nofollow noopener" target="_blank">Termux project</a> <a href="https://github.com/termux/termux-app" rel="external nofollow noopener" target="_blank">GitHub</a> </li> <li><a href="https://ivonblog.com/en-us/posts/termux-proot-distro-ubuntu/" rel="external nofollow noopener" target="_blank">Ivon’s Blog</a></li> <li><a href="https://github.com/LinuxDroidMaster/Termux-Desktops" rel="external nofollow noopener" target="_blank">Termux-Desktops tutorials</a></li> <li><a href="https://www.youtube.com/watch?v=SA03NwenOck" rel="external nofollow noopener" target="_blank">Technical Bot’s video on PRoot Chromium installation</a></li> <li><a href="https://github.com/agnostic-apollo/Android-Docs/blob/master/en/docs/apps/processes/phantom-cached-and-empty-processes.md" rel="external nofollow noopener" target="_blank">Documentation on Android phantom process killer</a></li> </ul> <h2 id="testing-environment">Testing Environment</h2> <ul> <li> <strong>Time of test:</strong> September 2024.</li> <li> <strong>Device:</strong> Xiaomi Pad 6S Pro 12.4 (24018RPACC)</li> <li> <strong>Resolution:</strong> 3048x2032</li> <li> <strong>SoC:</strong> Qualcomm Snapdragon 8gen2 @ 3.19GHz</li> <li> <strong>RAM:</strong> 16 GB</li> <li> <strong>ROM:</strong> 1 TB</li> <li> <strong>Android Version:</strong> 14 (Patch 2024-09-01)</li> <li> <strong>Android Kernel:</strong> 5.15.123-android13-8-00008-g2ca6a2912c7e-ab11087001</li> <li> <strong>HyperOS Version:</strong> 1.0.11.0.UNXCNXM</li> </ul> <h2 id="1-prerequisite-for-both-native-and-proot">1. Prerequisite (for both native and PRoot)</h2> <h3 id="11-android-apps">1.1 Android apps</h3> <h4 id="111-install-termux-apps">1.1.1 Install Termux apps</h4> <p><strong>DO NOT</strong> download from <em>Google Play Store</em> since the versions are outdated.</p> <ul> <li><a href="https://github.com/termux/termux-app/releases" rel="external nofollow noopener" target="_blank">Termux</a></li> <li> <a href="https://github.com/termux/termux-x11/releases/tag/nightly" rel="external nofollow noopener" target="_blank">Termux:X11</a> to display your desktop environment</li> <li> <a href="https://github.com/termux/termux-widget/releases" rel="external nofollow noopener" target="_blank">Termux:Widget</a> is used for quickly launching the Termux and PRoot desktop enviroment</li> <li> <a href="https://github.com/termux/termux-styling/releases" rel="external nofollow noopener" target="_blank">Termux:Styling</a> (optional, if you want to adjust the look of your Termux command-line interface)</li> </ul> <h4 id="112-in-termux-app-using-command">1.1.2 In Termux app using command:</h4> <p>Give permission for storage:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>termux-setup-storage
</code></pre></div></div> <p>Check for updates:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg update
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg upgrade
</code></pre></div></div> <p>Install X11 repos for displaying:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install x11-repo
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install termux-x11-nightly
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install pulseaudio
</code></pre></div></div> <p>To fix any repository issues:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>termux-change-repo
</code></pre></div></div> <p>Useful tools:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install wget
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install git
</code></pre></div></div> <h4 id="113-settings-for-termuxx11-app">1.1.3 Settings for Termux:X11 app:</h4> <p>If there is no <code class="language-plaintext highlighter-rouge">preference</code> button, take a look at your notification list in Android. Change the preference default settings:</p> <ul> <li> <strong>Display resolution mode:</strong> scaled</li> <li> <strong>Fullscreen on device display:</strong> on</li> <li> <strong>Force landscape orientation:</strong> on</li> <li> <strong>Hide display cutout:</strong> on</li> <li> <strong>Touchscreen input mode:</strong> trackpad</li> <li> <strong>Capture external mouse when possible:</strong> on</li> <li> <strong>Show additional keyboard:</strong> off</li> </ul> <p>Connecting to a (wireless) keyboard and mouse is recommended.</p> <h3 id="12-disable-android-phantom-process-killer">1.2 Disable Android phantom process killer</h3> <h4 id="121-what-is-phantom-process-killer">1.2.1 What is phantom process killer?</h4> <p>In a word, the phantom process killer is a mechanism introduced recently (Android version &gt;= 12) in Android Open Source Project (AOSP) that is present on almost all smart devices running Android-based OS (stock Android, HyperOS/MIUI, OriginOS, ColorOS, MagicOS, HarmonyOS (before NEXT), One UI, myUI, Flyme, etc.) It limits the number of children processes (phantom process running in the background) of apps and kills them without prompt. The default number of total phantom processes allowed is 32, which is not enough for running an OS on top of Android.</p> <p>More about this mechanism: <a href="https://github.com/agnostic-apollo/Android-Docs/blob/master/en/docs/apps/processes/phantom-cached-and-empty-processes.md" rel="external nofollow noopener" target="_blank">Documentation on Android phantom process killer</a>. <strong>This section is based on this article under the MIT licence.</strong></p> <p>An note for HarmonyOS (1.x–4.x) users: HarmonyOS does not display Android versions. To check the Android version your system is based on, you can use third-party tools to detect the API level. Note that the developer options available are also a little different from standard Android.</p> <h4 id="122-method-1-developer-options-recommended">1.2.2 Method 1: Developer options (recommended)</h4> <p><strong>ONLY for Android version &gt;= 14</strong></p> <p>Enable toggle once at <code class="language-plaintext highlighter-rouge">Android Settings -&gt; System -&gt; Developer options -&gt; Disable child process restrictions</code> to disable killing of <strong>extra phantom processes &gt; 32</strong> and processes using excessive cpu. You will need to enable Developer options first on your device for it to show in <code class="language-plaintext highlighter-rouge">System</code> settings page, and it can usually be done by tapping <code class="language-plaintext highlighter-rouge">Android Settings -&gt; About -&gt; Build number</code> field <strong>7</strong> times.</p> <p>If you disable <code class="language-plaintext highlighter-rouge">Developer options</code> again, then <code class="language-plaintext highlighter-rouge">Disable child process restrictions</code> toggle will be disabled again automatically and killing of phantom processes will be enabled again.</p> <h4 id="123-method-2-wireless-adb-debugging-not-recommended">1.2.3 Method 2: Wireless ADB debugging (NOT recommended)</h4> <p><strong>For Android 12L &amp; 13+</strong></p> <p>The wireless adb debugging is also in <code class="language-plaintext highlighter-rouge">Developer options</code>. Assuming there is no root access, the commands should be re-enabled on each reboot.</p> <p>On some devices, such as the one I am testing with, the method using adb wireless debugging do not work due to unknown reason.</p> <p><strong>Android 13:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>adb shell "settings put global settings_enable_monitor_phantom_procs false"
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>adb shell "/system/bin/device_config get_sync_disabled_for_tests"
</code></pre></div></div> <p><strong>Android 12:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>adb shell "/system/bin/device_config put activity_manager max_phantom_processes 2147483647"
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>adb shell "/system/bin/device_config is_sync_disabled_for_tests"
</code></pre></div></div> <h2 id="2-native-termux-linux-desktop-environment">2. Native Termux Linux Desktop Environment</h2> <h3 id="21-install-xfce4-desktop-environment">2.1 Install xfce4 desktop environment</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install xfce4
</code></pre></div></div> <h3 id="22-install-ported-linux-software">2.2 Install ported Linux software</h3> <p><strong>Prerequiste:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install tur-repo
</code></pre></div></div> <p><strong>Chromium:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install chromium
</code></pre></div></div> <p><em>Known issue:</em> crash on Google account login. To launch it, later in graphical interface: add <code class="language-plaintext highlighter-rouge">--no-sandbox</code> after launch command.</p> <p><strong>Code-oss:</strong> (open source project of Visual Studio Code)</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install code-oss
</code></pre></div></div> <p><em>Known issue:</em> cannot sync with Microsoft.</p> <h3 id="23-add-script-for-launching-desktop-environment">2.3 Add script for launching desktop environment</h3> <p>Download the script:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://raw.githubusercontent.com/LinuxDroidMaster/Termux-Desktops/main/scripts/termux_native/startxfce4_termux.sh
</code></pre></div></div> <p>OR, here is a backup if the original script no longer accessible:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://raw.githubusercontent.com/TerenceWSK/Android-Termux-Subsystem-for-Linux/main/scripts/startxfce4_termux.sh
</code></pre></div></div> <p>Copy the scrupt to <code class="language-plaintext highlighter-rouge">./.shortcuts/</code> to be accessible with Termux:Widget</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp ./startxfce4_termux.sh ./shortcuts/
</code></pre></div></div> <p>Give excution permissions:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod +x ./.shortcuts/startxfce4_termux.sh
</code></pre></div></div> <h3 id="24-launch-the-termux-native-desktop-environment-from-termuxwidget">2.4 Launch the Termux Native desktop environment from Termux:Widget</h3> <ul> <li>Long click/hold on the blank places on any Android home screen (launcher)</li> <li>Add a <strong>Android Widget “Termux:Widget”</strong> </li> <li>You should find the <code class="language-plaintext highlighter-rouge">startxfce4_termux.sh</code> </li> <li>Click on it and you should be able to lanch <strong>Termux:X11</strong>.</li> <li>Otherwise, in Termux terminal, use <code class="language-plaintext highlighter-rouge">sh ./startxfce4_termux.sh</code> </li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/post_contents/termux-android-480.webp 480w,/assets/img/post_contents/termux-android-800.webp 800w,/assets/img/post_contents/termux-android-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/post_contents/termux-android.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="25-file-sharing-with-android">2.5 File sharing with Android</h3> <p>In Termux native desktop, you can access your user files and folders of Android host machine mounted at <code class="language-plaintext highlighter-rouge">~/Desktop/shared/</code> or <code class="language-plaintext highlighter-rouge">/data/data/com.termux/files/home/Desktop/shared</code>. You can make a link on desktop or pin it to the sidebar of the file manager.</p> <h2 id="3-termux-based-proot-linux-distros-ubuntu">3. Termux-based PRoot Linux Distros (Ubuntu)</h2> <p>The Ubuntu system installation part is mostly based on <a href="https://ivonblog.com/en-us/posts/termux-proot-distro-ubuntu/" rel="external nofollow noopener" target="_blank">Ivon’s blog</a>, the software installation part is <em>my collection and adaptation from various sources to make things work</em>.</p> <h3 id="31-ubuntu-setup">3.1 Ubuntu setup</h3> <p><strong>Installation:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pkg install proot-distro
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proot-distro install ubuntu
</code></pre></div></div> <p><strong>Login to Ubuntu:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proot-distro login ubuntu --user root --shared-tmp
</code></pre></div></div> <p><strong>Install tools:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt update
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt install sudo vim software-properties-common
</code></pre></div></div> <p><strong>Due to no systemd on Android, disable Ubuntu snap:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat &lt;&lt;EOF | sudo tee /etc/apt/preferences.d/nosnap.pref
# To prevent repository packages from triggering the installation of Snap,
# this file forbids snapd from being installed by APT.
# For more information: https://linuxmint-user-guide.readthedocs.io/en/latest/snap.html
Package: snapd
Pin: release a=*
Pin-Priority: -10
EOF
</code></pre></div></div> <p><strong>Install Firefox or you will not have a browser to download software:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo add-apt-repository ppa:mozillateam/ppa
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get update
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install firefox-esr
</code></pre></div></div> <p><strong>Create a password for root:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd
</code></pre></div></div> <p><strong>Create groups:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>groupadd storage
groupadd wheel
groupadd video
</code></pre></div></div> <p><strong>Create a regular user other than root:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>useradd -m -g users -G wheel,audio,video,storage -s /bin/bash user
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd user
</code></pre></div></div> <p><strong>Add user to sudo group:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>visudo
</code></pre></div></div> <p>Press the “I” key for insertion of:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user ALL=(ALL:ALL) ALL
</code></pre></div></div> <p>Touch “ESC” on the bottom of the screen and type:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wq
</code></pre></div></div> <p>to exit.</p> <p><strong>Switch to regular user:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>su user
cd
</code></pre></div></div> <p><strong>Install xfce desktop environment:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install xubuntu-desktop
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo update-alternatives --config x-terminal-emulator
</code></pre></div></div> <p>For KDE and GNOME you can refer to <a href="https://ivonblog.com/en-us/posts/termux-proot-distro-ubuntu/" rel="external nofollow noopener" target="_blank">Ivon’s blog</a> or the <a href="https://github.com/LinuxDroidMaster/Termux-Desktops/blob/main/Documentation/proot/ubuntu_proot.md" rel="external nofollow noopener" target="_blank">Tutorials by LinuxDroidMaster</a></p> <p><strong>Disable Ubuntu lockscreen.</strong> When Android is locked and unlocked, Ubuntu displays a lockscreen with no correct password to login. This might be due to compatibility isuues with PRoot:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xset s off
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xset -dpms
</code></pre></div></div> <h3 id="32-optional-support-for-the-chinese-language-可選添加中文支持">3.2 (Optional) Support for the Chinese language （可選）添加中文支持</h3> <p><strong>添加字體：</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install locales fonts-noto-cjk
</code></pre></div></div> <p><strong>修改配置文件：</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/locale.gen
</code></pre></div></div> <p>將其中<code class="language-plaintext highlighter-rouge">zh_CN.UTF-8 UTF-8</code>前的#號移除 使用<code class="language-plaintext highlighter-rouge">:wq!</code>退出vim</p> <p><strong>生成語言：</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>locale-gen
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "LANG=zh_CN.UTF-8 UTF-8" &gt; /etc/locale.conf
</code></pre></div></div> <p><strong>移除ibus組件：</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt purge ibus
</code></pre></div></div> <p><strong>安裝fcitx組件和Google拼音：</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt install fcitx fcitx-pinyin
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fcitx-googlepinyin
</code></pre></div></div> <p>在3.3節成功進入xfce4圖形界面後，在應用菜單&gt;語言支持(Language Support)和fcitx設置中，添加English(US)作為鍵盤佈局，以及選擇Google Pinyin作為輸入法，重啟終端。</p> <h3 id="33-add-script-for-launching-desktop-environment">3.3 Add script for launching desktop environment</h3> <p>Download the script:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://raw.githubusercontent.com/TerenceWSK/Android-Termux-Subsystem-for-Linux/main/scripts/startproot_ubuntu.sh
</code></pre></div></div> <p>Copy the scrupt to <code class="language-plaintext highlighter-rouge">./.shortcuts/</code> to be accessible with Termux:Widget</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp ./startproot_ubuntu.sh ./shortcuts/
</code></pre></div></div> <p>Give excution permissions:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod +x ./.shortcuts/startproot_ubuntu.sh
</code></pre></div></div> <h3 id="34-launch-the-ubuntu-desktop-environment-from-termuxwidget">3.4 Launch the Ubuntu desktop environment from Termux:Widget</h3> <ul> <li>Long click/hold on the blank places on any Android home screen (launcher)</li> <li>Add a Android Widget “Termux:Widget”</li> <li>You should find the <code class="language-plaintext highlighter-rouge">startproot_ubuntu.sh</code> </li> <li>Click on it and you should be able to lanch Termux:X11.</li> <li>Otherwise, in Termux terminal, use <code class="language-plaintext highlighter-rouge">sh ./startproot_ubuntu.sh</code> </li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/post_contents/termux-ubuntu-480.webp 480w,/assets/img/post_contents/termux-ubuntu-800.webp 800w,/assets/img/post_contents/termux-ubuntu-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/post_contents/termux-ubuntu.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="35-file-sharing-with-android">3.5 File sharing with Android</h3> <p>In Termux native desktop, you can access your user files and folders of Android host machine mounted at <code class="language-plaintext highlighter-rouge">/storage/emulated/0</code>. You can make a link on desktop or pin it to the sidebar of the file manager.</p> <h3 id="36-ubuntu-softwares">3.6 Ubuntu softwares</h3> <h4 id="tested-to-work-directly">Tested to work directly:</h4> <ul> <li>GIMP (pre-installed)</li> <li>Octave (<code class="language-plaintext highlighter-rouge">sudo apt install octave</code>)</li> <li>TeX Live (<code class="language-plaintext highlighter-rouge">sudo apt install texlive</code>)</li> </ul> <h4 id="does-not-work">Does not work:</h4> <ul> <li>WPS office (crash on launch)</li> <li>blender (crash on launch)</li> </ul> <h4 id="visual-studio-code">Visual Studio Code</h4> <ul> <li>Go to <a href="https://code.visualstudio.com/download#" rel="external nofollow noopener" target="_blank">VS Code download page</a> and select Linux Arm64.</li> <li>In <code class="language-plaintext highlighter-rouge">Downloads</code> folder: <code class="language-plaintext highlighter-rouge">sudo dpkg -i code*.deb</code> </li> <li>In the properties of the VS Code launch icon: add <code class="language-plaintext highlighter-rouge">--no-sandbox</code> </li> </ul> <h4 id="chromium">Chromium</h4> <table> <tbody> <tr> <td>On September 2024, the method introduced in the tutorial video [“How to install Chromium in Ubuntu</td> <td>Termux” by Technical Bot](https://www.youtube.com/watch?v=SA03NwenOck) can no longer work smoothly, mainly due to gpg key management issue due to the current server conditions and the updated software.</td> </tr> </tbody> </table> <p><strong>Check if gpg is installed:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install gnupg
</code></pre></div></div> <p><strong>Add the debian source that has Chromium:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "deb http://ftp.debian.org/debian buster main" &gt;&gt; /etc/apt/sources.list
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update
</code></pre></div></div> <p><strong>Then a gpg key error will occur.</strong> The original method:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com --recv-keys 648ACFD622F3D138
</code></pre></div></div> <p>will NOT work.</p> <p>One solution is to exit the graphical enviroment, kill, and re-open Termux:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>proot-distro login ubuntu
</code></pre></div></div> <p>Try the following solutions:</p> <p><strong>Solution 1:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 8B48AD6246925553
</code></pre></div></div> <p><strong>Solution 2:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg2 --keyserver hkps://keyserver.ubuntu.com:443 --recv-keys 648ACFD622F3D138
</code></pre></div></div> <p><strong>Solution 3:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --keyserver pgp.mit.edu --recv-keys 54404762BBB6E853 BDE6D2B9216EC7A8 648ACFD622F3D138 0E98404D386FA1D9 F8D2585B8783D481 0E98404D386FA1D9 6ED0E7B82643E131
</code></pre></div></div> <p>or</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg --armor --export DC30D7C23CBBABEE | sudo apt-key add -
</code></pre></div></div> <p>Then</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt update
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install chromium
</code></pre></div></div> <p>In the properties of the VS Code launch icon: add <code class="language-plaintext highlighter-rouge">--no-sandbox</code></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">本篇文章的閱讀體驗如何？</h2> <p class="mb-2">更多文章的閱讀推薦</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/zh-hk/blog/2025/conf-ACP/">[學術會議報告] ACP: Real-Time Observation of Ultrafast Thermo-Optic Nonlinearity in Time-Varying Effective Epsilon-Near-Zero Media</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://memento.epfl.ch/event/advances-in-fibre-based-integrated-photonic-system/" target="_blank" rel="external nofollow noopener">[邀請研討會] Advances in fibre-based &amp; integrated photonic systems</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://mp.weixin.qq.com/s/fww4ghSyg3XZPu7PH-QjMA" target="_blank" rel="external nofollow noopener">[受邀研討會] Epsilon-Near-Zero Photonics: Crossroad of Multidisciplinary Research</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://memento.epfl.ch/event/nanophotonic-enabled-extra-and-intra-cavity-mani-2/" target="_blank" rel="external nofollow noopener">[瑞士洛桑聯邦理工大學活動] Nanophotonic-enabled extra- and intra-cavity manipulation of ultrafast optical pulse trains</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/zh-hk/blog/2025/cover-ACSP-cover/">[期刊封面] ACS光子學：Intracavity Epsilon-Near-Zero Dual-Range Frequency Switch</a> </li> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> ©版權所有 2025 Jiaye Wu. 瑞士洛桑聯邦理工大學（EPFL） 工學院 光子學系統實驗室。 </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="鍵入以開始搜索"> <div class="modal-footer" slot="footer"> <span class="help"> <svg version="1.0" class="ninja-examplekey" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1280 1280"> <path d="M1013 376c0 73.4-.4 113.3-1.1 120.2a159.9 159.9 0 0 1-90.2 127.3c-20 9.6-36.7 14-59.2 15.5-7.1.5-121.9.9-255 1h-242l95.5-95.5 95.5-95.5-38.3-38.2-38.2-38.3-160 160c-88 88-160 160.4-160 161 0 .6 72 73 160 161l160 160 38.2-38.3 38.3-38.2-95.5-95.5-95.5-95.5h251.1c252.9 0 259.8-.1 281.4-3.6 72.1-11.8 136.9-54.1 178.5-116.4 8.6-12.9 22.6-40.5 28-55.4 4.4-12 10.7-36.1 13.1-50.6 1.6-9.6 1.8-21 2.1-132.8l.4-122.2H1013v110z"></path> </svg> 選擇 </span> <span class="help"> <svg xmlns="http://www.w3.org/2000/svg" class="ninja-examplekey" viewbox="0 0 24 24"> <path d="M0 0h24v24H0V0z" fill="none"></path> <path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" class="ninja-examplekey" viewbox="0 0 24 24"> <path d="M0 0h24v24H0V0z" fill="none"></path> <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"></path> </svg> 導航 </span> <span class="help"> <span class="ninja-examplekey esc">esc</span> 關閉 </span> <span class="help"> <svg xmlns="http://www.w3.org/2000/svg" class="ninja-examplekey backspace" viewbox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M6.707 4.879A3 3 0 018.828 4H15a3 3 0 013 3v6a3 3 0 01-3 3H8.828a3 3 0 01-2.12-.879l-4.415-4.414a1 1 0 010-1.414l4.414-4.414zm4 2.414a1 1 0 00-1.414 1.414L10.586 10l-1.293 1.293a1 1 0 101.414 1.414L12 11.414l1.293 1.293a1 1 0 001.414-1.414L13.414 10l1.293-1.293a1 1 0 00-1.414-1.414L12 8.586l-1.293-1.293z" clip-rule="evenodd"></path> </svg> 回到上級 </span> </div> </ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/zh-hk/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>